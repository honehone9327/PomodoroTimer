(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(8970)}])},8970:function(e,s,t){"use strict";t.r(s),t.d(s,{__N_SSG:function(){return X},default:function(){return G}});var a=t(5893),l=t(7294),r=t(5264),n=t(2089),c=t(3846),i=t(7957),d=t(2287),x=t(4101),o=t(5062),u=t(163),m=t(2528),h=t(8267),f=t(530);let j=e=>{let{children:s,className:t="",...l}=e;return(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 ".concat(t),...l,children:s})},p=e=>{let{id:s,min:t,max:l,step:r=1,value:n,onValueChange:c,className:i=""}=e;return(0,a.jsx)("input",{type:"range",id:s,min:t,max:l,step:r,value:n[0],onChange:e=>{c([Number(e.target.value)])},className:"w-full h-2 bg-blue-200 rounded-lg appearance-none cursor-pointer ".concat(i)})};var g=t(8658);let N=e=>{let{children:s}=e;return(0,a.jsx)(g.fC,{children:s})},v=e=>{let{children:s}=e;return(0,a.jsx)(g.xz,{asChild:!0,children:s})},b=e=>{let{children:s,className:t=""}=e;return(0,a.jsxs)(g.VY,{className:"bg-white p-4 rounded-md shadow-lg ".concat(t),sideOffset:5,children:[s,(0,a.jsx)(g.Eh,{className:"fill-white"})]})};var y=t(952);let w=e=>{let{children:s,className:t="",...l}=e;return(0,a.jsx)(y.fC,{className:"flex items-center justify-center overflow-hidden rounded-full ".concat(t),...l,children:s})},k=e=>{let{src:s,alt:t}=e;return(0,a.jsx)(y.Ee,{className:"w-full h-full object-cover",src:s,alt:t})},S=e=>{let{children:s}=e;return(0,a.jsx)(y.NY,{className:"flex items-center justify-center w-full h-full bg-gray-200 text-gray-500",children:s})},z=e=>{let{children:s,className:t="",...l}=e;return(0,a.jsx)("div",{className:"bg-white shadow-md rounded-lg overflow-hidden ".concat(t),...l,children:s})},C=e=>{let{children:s,className:t=""}=e;return(0,a.jsx)("div",{className:"px-4 py-2 border-b border-gray-200 ".concat(t),children:s})},E=e=>{let{children:s,className:t=""}=e;return(0,a.jsx)("div",{className:"p-4 ".concat(t),children:s})};var _=t(1664),A=t.n(_),D=t(2512),M=t(7918),F=t(2854);let Z=e=>{let{open:s,onOpenChange:t,children:l}=e;return(0,a.jsx)(F.fC,{open:s,onOpenChange:t,children:l})},P=e=>{let{children:s,className:t=""}=e;return(0,a.jsxs)(F.h_,{children:[(0,a.jsx)(F.aV,{className:"fixed inset-0 bg-black bg-opacity-30"}),(0,a.jsx)(F.VY,{className:"fixed top-1/2 left-1/2 max-w-lg w-full bg-white rounded-lg p-6 transform -translate-x-1/2 -translate-y-1/2 shadow-lg ".concat(t),children:s})]})},B=e=>{let{children:s,className:t=""}=e;return(0,a.jsx)("div",{className:"mb-4 ".concat(t),children:s})},I=e=>{let{children:s}=e;return(0,a.jsx)(F.Dx,{className:"text-xl font-semibold text-gray-900",children:s})},O=e=>{let{children:s,className:t=""}=e;return(0,a.jsx)("div",{className:"mt-4 flex justify-end space-x-2 ".concat(t),children:s})};var T=e=>{let{isSettingsOpen:s,setIsSettingsOpen:t,selectedBackground:l,setSelectedBackground:r,customBackground:n,setCustomBackground:c,backgroundOptions:i,characterOptions:d,selectedCharacter:x,setSelectedCharacter:o,soundOptions:u,selectedSound:m,setSelectedSound:j,getRootProps:p,getInputProps:g,isDragActive:N}=e;return(0,a.jsx)(Z,{open:s,onOpenChange:t,children:(0,a.jsxs)(P,{children:[(0,a.jsx)(B,{children:(0,a.jsx)(I,{children:"設定"})}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"text-lg font-medium",children:"背景画像選択"}),(0,a.jsx)("div",{className:"grid grid-cols-2 gap-2",children:i.map(e=>(0,a.jsxs)(f.z,{variant:l===e?"default":"outline",className:"flex flex-col items-center p-2",onClick:()=>r(e),children:[(0,a.jsx)("img",{src:"/images/backgrounds/".concat(e,".jpg"),alt:e,className:"w-20 h-20 object-cover rounded"}),(0,a.jsx)("span",{className:"mt-1 text-xs capitalize",children:"default"===e?"デフォルト":e})]},e))}),(0,a.jsx)("h3",{className:"text-lg font-medium",children:"その他"}),(0,a.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,a.jsx)(A(),{href:"/privacy-policy",passHref:!0,children:(0,a.jsx)(f.z,{variant:"link",className:"flex items-center space-x-2",children:(0,a.jsx)("span",{className:"text-xs sm:text-sm",children:"プライバシーポリシー"})})}),(0,a.jsx)(A(),{href:"/account-settings",passHref:!0,children:(0,a.jsxs)(f.z,{as:"a",variant:"link",className:"flex items-center space-x-2",children:[(0,a.jsx)(h.Z,{className:"w-4 h-4"}),(0,a.jsx)("span",{className:"text-xs sm:text-sm",children:"アカウント設定"})]})}),(0,a.jsx)(A(),{href:"/notification-settings",passHref:!0,children:(0,a.jsxs)(f.z,{variant:"link",className:"flex items-center space-x-2",children:[(0,a.jsx)(M.Z,{className:"w-4 h-4"}),(0,a.jsx)("span",{className:"text-xs sm:text-sm",children:"通知設定"})]})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-medium",children:"カスタム背景画像"}),(0,a.jsxs)("div",{...p(),className:"p-4 border-2 border-dashed border-gray-400 rounded-md text-center cursor-pointer",children:[(0,a.jsx)("input",{...g()}),N?(0,a.jsx)("p",{children:"ファイルをドロップしてください..."}):(0,a.jsx)("p",{children:"ここに画像をドラッグ＆ドロップするか、クリックして選択してください"})]})]})]}),(0,a.jsx)(O,{children:(0,a.jsx)(f.z,{onClick:()=>t(!1),className:"bg-blue-500 hover:bg-blue-600 text-white",children:"閉じる"})})]})})};let R=["焚き火","雨","波","森","なし"],V=["ずんだもん","なし"],H=["default","nature","city","abstract"],L=["集中力を保ち、決して諦めない。","限界はあなたの想像力だけ。","自分を追い込んで、他の誰にも頼らない。","偉大なものは快適ゾーンから生まれない。","夢を見て、願い、実行する。","前向きに、努力し、実現させる。","疲れたときに止まるのではなく、終わったときに止まる。","何かのために一生懸命働けば、達成したときの喜びも大きい。","もっと大きな夢を。もっと大きなことを。","チャンスを待つのではなく、作り出す。"],W=["深呼吸をして、リラックスしましょう。","水分補給を忘れずに。","少し体を動かしてみましょう。","目を休ませるために、遠くを見てみましょう。","姿勢を正して、背筋を伸ばしましょう。","次の集中タイムに向けて、目標を再確認しましょう。","感謝の気持ちを思い出してみましょう。","今の気分を言葉で表現してみましょう。","窓の外の景色を眺めてみましょう。","好きな音楽を聴いてリフレッシュしましょう。"];function Y(){let[e,s]=(0,l.useState)(!1),[t,g]=(0,l.useState)(30),[y,_]=(0,l.useState)(5),[M,F]=(0,l.useState)(4),[Z,P]=(0,l.useState)(1),[B,I]=(0,l.useState)(60*t),[O,Y]=(0,l.useState)("idle"),[X,G]=(0,l.useState)(!1),[U,q]=(0,l.useState)(60*t),[J,K]=(0,l.useState)("なし"),[Q,$]=(0,l.useState)("ずんだもん"),[ee,es]=(0,l.useState)("default"),[et,ea]=(0,l.useState)(""),[el,er]=(0,l.useState)(""),[en,ec]=(0,l.useState)(""),[ei,ed]=(0,l.useState)(""),ex=(0,l.useRef)(null),eo=(0,l.useRef)(null),eu=(0,l.useRef)(null);(0,l.useEffect)(()=>{ea(eN())},[]),(0,l.useEffect)(()=>{let e;return X&&B>0&&(e=setInterval(()=>{I(e=>{let s=e-1;return(5===s&&"idle"!==O&&ej(),s<=0)?(em(),0):s})},1e3)),()=>clearInterval(e)},[X,B,O]),(0,l.useEffect)(()=>{eo.current&&("なし"!==J?(eo.current.src="/audio/".concat(J,".mp3"),eo.current.loop=!0,eo.current.play().catch(e=>console.error("Audio playback failed:",e))):eo.current.pause()),eu.current&&("default"!==ee&&"custom"!==ee?(eu.current.src=eg(),eu.current.play().catch(e=>console.error("Video playback failed:",e))):"custom"===ee?(eu.current.src=ei,eu.current.play().catch(e=>console.error("Custom video playback failed:",e))):eu.current.pause())},[J,ee,ei]);let em=()=>{ep(),"focus"===O?Z<M?(Y("break"),I(60*y),q(60*y),er(ev()),ec("お疲れ様です！少し休憩しましょう。")):(Y("idle"),G(!1),er(""),ec("素晴らしい！全てのセットが完了しました。")):"break"===O&&(P(e=>e+1),Y("focus"),I(60*t),q(60*t),er(""),ec("さあ、次の集中タイムを始めましょう！"))},eh=()=>{"idle"===O&&(Y("focus"),I(60*t),q(60*t),ea(eN()),ec("頑張りましょう！集中タイムの始まりです。")),G(!0)},ef=(0,l.useCallback)((e,s)=>{if(!ex.current||"idle"===O)return;let t=ex.current.getBoundingClientRect(),a=t.left+t.width/2,l=Math.atan2(s-(t.top+t.height/2),e-a)+Math.PI/2;l<0&&(l+=2*Math.PI),I(Math.round(l/(2*Math.PI)*U))},[O,U]),ej=()=>{new Audio("/audio/warning_sound.mp3").play().catch(e=>console.error("Warning sound playback failed:",e))},ep=()=>{new Audio("/audio/switch_sound.mp3").play().catch(e=>console.error("Switch sound playback failed:",e))},eg=()=>{switch(ee){case"nature":return"/videos/nature.mp4";case"city":return"/videos/city.mp4";case"abstract":return"/videos/abstract.mp4";default:return""}},eN=()=>{let e=Math.floor(Math.random()*L.length);return L[e]},ev=()=>{let e=Math.floor(Math.random()*W.length);return W[e]},{getRootProps:eb,getInputProps:ey,isDragActive:ew}=(0,D.uI)({onDrop:e=>{if(0===e.length)return;let s=e[0],t=new FileReader;t.onload=()=>{ed(t.result),es("custom")},t.readAsDataURL(s)},accept:{"image/*":[]},multiple:!1});return(0,a.jsxs)("div",{className:"flex flex-col h-screen overflow-hidden relative",children:[(0,a.jsx)("div",{className:"absolute top-4 right-4 z-20",children:(0,a.jsxs)(N,{children:[(0,a.jsx)(v,{children:(0,a.jsx)(f.z,{variant:"outline",className:"p-2 rounded-full",children:(0,a.jsx)(r.Z,{className:"w-5 h-5"})})}),(0,a.jsx)(b,{className:"w-40",children:(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)(A(),{href:"/privacy-policy",passHref:!0,children:(0,a.jsx)(f.z,{variant:"link",className:"w-full justify-start text-xs",children:"プライバシーポリシー"})}),(0,a.jsx)(A(),{href:"/account-settings",passHref:!0,children:(0,a.jsx)(f.z,{variant:"link",className:"w-full justify-start text-xs",children:"アカウント設定"})}),(0,a.jsx)(A(),{href:"/notification-settings",passHref:!0,children:(0,a.jsx)(f.z,{variant:"link",className:"w-full justify-start text-xs",children:"通知設定"})})]})})]})}),"default"!==ee&&"custom"!==ee&&(0,a.jsx)("video",{ref:eu,className:"absolute top-0 left-0 w-full h-full object-cover -z-10",src:eg(),autoPlay:!0,loop:!0,muted:!0}),"custom"===ee&&(0,a.jsx)("video",{ref:eu,className:"absolute top-0 left-0 w-full h-full object-cover -z-10",src:ei,autoPlay:!0,loop:!0,muted:!0}),(0,a.jsx)("div",{className:"absolute inset-0 bg-white bg-opacity-30 -z-5"}),(0,a.jsx)("main",{className:"flex-grow flex items-center justify-center bg-gray-100 text-gray-800 p-4",children:(0,a.jsxs)(z,{className:"relative z-10 w-full max-w-md bg-white bg-opacity-90 shadow-lg rounded-lg",children:[(0,a.jsx)(C,{className:"border-b border-gray-200",children:void 0}),(0,a.jsxs)(E,{className:"p-4 space-y-4",children:[en&&(0,a.jsxs)("div",{className:"bg-blue-100 p-2 rounded-lg relative",children:[(0,a.jsx)("div",{className:"absolute -top-2 left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-4 border-r-4 border-b-4 border-blue-100"}),(0,a.jsx)("p",{className:"text-center text-xs",children:en})]}),"idle"===O?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("p",{className:"text-center text-[10px] sm:text-[12px]",children:"今日はどのようなタイマーで作業しますか？"}),(0,a.jsx)("div",{className:"p-2 bg-gray-100 rounded-md mt-4",children:(0,a.jsxs)("p",{className:"text-center italic text-[12px] sm:text-[14px]",children:['"',et,'"']})}),(0,a.jsxs)("div",{className:"space-y-4 mt-4",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)(j,{htmlFor:"focusTime",className:"flex items-center space-x-2",children:[(0,a.jsx)(n.Z,{className:"w-5 h-5"}),(0,a.jsx)("span",{className:"text-base",children:"集中時間"})]}),(0,a.jsxs)("span",{className:"text-base font-bold",children:[t,"分"]})]}),(0,a.jsx)(p,{id:"focusTime",min:20,max:60,step:1,value:[t],onValueChange:e=>g(e[0]),className:"slider-blue"})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)(j,{htmlFor:"breakTime",className:"flex items-center space-x-2",children:[(0,a.jsx)(c.Z,{className:"w-5 h-5"}),(0,a.jsx)("span",{className:"text-base",children:"休憩時間"})]}),(0,a.jsxs)("span",{className:"text-base font-bold",children:[y,"分"]})]}),(0,a.jsx)(p,{id:"breakTime",min:2,max:10,step:1,value:[y],onValueChange:e=>_(e[0]),className:"slider-blue"})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)(j,{htmlFor:"cycles",className:"flex items-center space-x-2",children:[(0,a.jsx)(i.Z,{className:"w-5 h-5"}),(0,a.jsx)("span",{className:"text-xs sm:text-sm",children:"セット数"})]}),(0,a.jsxs)("span",{className:"text-xs sm:text-sm font-bold",children:[M,"回"]})]}),(0,a.jsx)(p,{id:"cycles",min:1,max:20,step:1,value:[M],onValueChange:e=>F(e[0]),className:"slider-blue"})]}),(0,a.jsx)("div",{className:"mt-4 p-2 bg-green-100 rounded-md",children:(0,a.jsxs)("p",{className:"text-center text-sm sm:text-base font-semibold",children:["トータル: ",((t*M+y*(M-1))*60/3600).toFixed(2)," 時間"]})})]}),(0,a.jsxs)("div",{className:"flex space-x-2 mt-4",children:[(0,a.jsxs)(N,{children:[(0,a.jsx)(v,{children:(0,a.jsxs)(f.z,{variant:"outline",className:"flex-1 text-xs flex items-center justify-center min-w-[80px]",children:[(0,a.jsxs)(w,{className:"mr-1 w-4 h-4",children:[(0,a.jsx)(k,{src:"/images/avatars/".concat(Q,".png"),alt:Q}),(0,a.jsx)(S,{children:Q[0]})]}),"アバター選択"]})}),(0,a.jsx)(b,{className:"w-40",children:(0,a.jsx)("div",{className:"grid gap-2",children:V.map(e=>(0,a.jsx)(f.z,{variant:Q===e?"default":"outline",className:"w-full justify-start text-xs capitalize",onClick:()=>$(e),children:"なし"===e?"なし":e},e))})})]}),(0,a.jsxs)(N,{children:[(0,a.jsx)(v,{children:(0,a.jsxs)(f.z,{variant:"outline",className:"flex-1 text-xs flex items-center justify-center min-w-[80px]",children:[(0,a.jsx)(d.Z,{className:"mr-1 w-5 h-5"}),"音楽選択"]})}),(0,a.jsx)(b,{className:"w-40",children:(0,a.jsx)("div",{className:"grid gap-2",children:R.map(e=>(0,a.jsx)(f.z,{variant:J===e?"default":"outline",className:"w-full justify-start text-xs capitalize",onClick:()=>K(e),children:e},e))})})]})]}),(0,a.jsx)(f.z,{onClick:eh,className:"w-full bg-blue-500 hover:bg-blue-600 text-white text-sm py-2 rounded-lg mt-4",children:"START"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"p-2 bg-gray-100 rounded-md",children:(0,a.jsxs)("p",{className:"text-center italic text-xs sm:text-[12px]",children:['"',et,'"']})}),(0,a.jsx)("div",{className:"relative w-48 h-48 sm:w-64 sm:h-64 mx-auto mt-2",children:(0,a.jsxs)("svg",{className:"w-48 h-48 sm:w-64 sm:h-64",viewBox:"0 0 200 200",onMouseDown:e=>{e.preventDefault();let s=e=>{ef(e.clientX,e.clientY)},t=()=>{document.removeEventListener("mousemove",s),document.removeEventListener("mouseup",t)};document.addEventListener("mousemove",s),document.addEventListener("mouseup",t)},onTouchStart:e=>e.preventDefault(),onTouchMove:e=>{let s=e.touches[0];ef(s.clientX,s.clientY)},children:[(0,a.jsx)("circle",{cx:"100",cy:"100",r:"90",fill:"transparent",stroke:"#E2E8F0",strokeWidth:"10"}),(0,a.jsx)("circle",{ref:ex,cx:"100",cy:"100",r:"90",fill:"transparent",stroke:"focus"===O?"#4299E1":"#38A169",strokeWidth:"10",strokeDasharray:"".concat(2*Math.PI*90),strokeDashoffset:2*Math.PI*90*(1-B/U),transform:"rotate(-90 100 100)",className:"transition-stroke-dashoffset duration-750 ease-linear",style:{cursor:"pointer",pointerEvents:"all"}}),"focus"===O&&(0,a.jsx)("text",{x:"100",y:"50",textAnchor:"middle",alignmentBaseline:"middle",style:{fontSize:"16px",fill:"#2D3748",fontFamily:"Arial, sans-serif"},children:"集中時間"}),"break"===O&&(0,a.jsx)("text",{x:"100",y:"50",textAnchor:"middle",alignmentBaseline:"middle",style:{fontSize:"16px",fill:"#2D3748",fontFamily:"Arial, sans-serif"},children:"休憩時間"}),(0,a.jsx)("text",{x:"100",y:"100",textAnchor:"middle",alignmentBaseline:"middle",style:{fontSize:"40px",fontWeight:"bold",fill:"#2D3748",fontFamily:"Arial, sans-serif"},children:"".concat(Math.floor(B/60).toString().padStart(2,"0"),":").concat((B%60).toString().padStart(2,"0"))}),(0,a.jsxs)("g",{transform:"translate(100, 150)",textAnchor:"middle",alignmentBaseline:"middle",children:[" ",(0,a.jsx)("text",{x:"0",y:"15",style:{fontSize:"12px",fill:"#2D3748",fontFamily:"Arial, sans-serif"},children:"セット"}),(0,a.jsxs)("text",{x:"0",y:"25",style:{fontSize:"12px",fontWeight:"bold",fill:"#2D3748",fontFamily:"Arial, sans-serif"},children:[Z,"/",M]})]})]})}),"break"===O&&el&&(0,a.jsx)("div",{className:"mt-2 p-2 bg-gray-100 rounded-md",children:(0,a.jsx)("p",{className:"text-center text-xs sm:text-[12px] italic select-none",children:el})}),(0,a.jsxs)("div",{className:"flex justify-center space-x-2 mt-2",children:[(0,a.jsx)(f.z,{onClick:X?()=>{G(!1),ec("一時停止中です。準備ができたら再開しましょう。")}:eh,className:"bg-blue-500 hover:bg-blue-600 text-white p-2 rounded-full",children:X?(0,a.jsx)(x.Z,{className:"w-5 h-5"}):(0,a.jsx)(o.Z,{className:"w-5 h-5"})}),(0,a.jsx)(f.z,{onClick:()=>{G(!1),Y("idle"),I(60*t),q(60*t),P(1),er(""),ec("タイマーをリセットしました。新たな気持ちで始めましょう！")},className:"bg-gray-300 hover:bg-gray-400 text-gray-800 p-2 rounded-full",children:(0,a.jsx)(u.Z,{className:"w-5 h-5"})}),(0,a.jsxs)(N,{children:[(0,a.jsx)(v,{children:(0,a.jsx)(f.z,{className:"bg-gray-300 hover:bg-gray-400 text-gray-800 p-2 rounded-full",children:(0,a.jsx)(m.Z,{className:"w-5 h-5"})})}),(0,a.jsx)(b,{className:"w-40",children:(0,a.jsx)("div",{className:"grid gap-2",children:R.map(e=>(0,a.jsx)(f.z,{variant:J===e?"default":"outline",className:"w-full justify-start text-xs capitalize",onClick:()=>K(e),children:e},e))})})]}),(0,a.jsxs)(N,{children:[(0,a.jsx)(v,{children:(0,a.jsx)(f.z,{className:"bg-gray-300 hover:bg-gray-400 text-gray-800 p-2 rounded-full",children:(0,a.jsx)(h.Z,{className:"w-5 h-5"})})}),(0,a.jsx)(b,{className:"w-40",children:(0,a.jsx)("div",{className:"grid gap-2",children:V.map(e=>(0,a.jsx)(f.z,{variant:Q===e?"default":"outline",className:"w-full justify-start text-xs capitalize",onClick:()=>$(e),children:"なし"===e?"なし":e},e))})})]})]})]})]})]})}),(0,a.jsx)(T,{isSettingsOpen:e,setIsSettingsOpen:s,selectedBackground:ee,setSelectedBackground:e=>es(e),customBackground:ei,setCustomBackground:ed,backgroundOptions:H,characterOptions:V,selectedCharacter:Q,setSelectedCharacter:$,soundOptions:R,selectedSound:J,setSelectedSound:e=>K(e),getRootProps:eb,getInputProps:ey,isDragActive:ew}),(0,a.jsx)("audio",{ref:eo})]})}var X=!0,G=()=>(0,a.jsx)("div",{className:"container mx-auto p-4",children:(0,a.jsx)(Y,{})})}},function(e){e.O(0,[892,888,774,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);